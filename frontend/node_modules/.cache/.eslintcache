[{"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/index.js":"1","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/reportWebVitals.js":"2","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/App.jsx":"3","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/utils/constants.js":"4","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/lib/customHooks.js":"5","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/AddBook/AddBook.jsx":"6","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/Book/Book.jsx":"7","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/Home/Home.jsx":"8","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/updateBook/UpdateBook.jsx":"9","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/SignIn/SignIn.jsx":"10","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Footer/Footer.jsx":"11","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/ScrollToTop/ScrollToTop.jsx":"12","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Header/Header.jsx":"13","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/lib/common.js":"14","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/BackArrow/BackArrow.jsx":"15","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BookForm/BookForm.jsx":"16","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BestRatedBooks/BestRatedBooks.jsx":"17","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BookRatingForm/BookRatingForm.jsx":"18","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BookInfo/BookInfo.jsx":"19","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BookItem/BookItem.jsx":"20","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/lib/functions.jsx":"21"},{"size":592,"mtime":1695841141000,"results":"22","hashOfConfig":"23"},{"size":375,"mtime":1695841141000,"results":"24","hashOfConfig":"23"},{"size":1337,"mtime":1695841141000,"results":"25","hashOfConfig":"23"},{"size":402,"mtime":1695841141000,"results":"26","hashOfConfig":"23"},{"size":1336,"mtime":1695841141000,"results":"27","hashOfConfig":"23"},{"size":1396,"mtime":1695841141000,"results":"28","hashOfConfig":"23"},{"size":3754,"mtime":1695841141000,"results":"29","hashOfConfig":"23"},{"size":1378,"mtime":1695841141000,"results":"30","hashOfConfig":"23"},{"size":1754,"mtime":1695841141000,"results":"31","hashOfConfig":"23"},{"size":4351,"mtime":1695841141000,"results":"32","hashOfConfig":"23"},{"size":903,"mtime":1695841141000,"results":"33","hashOfConfig":"23"},{"size":246,"mtime":1695841141000,"results":"34","hashOfConfig":"23"},{"size":1324,"mtime":1695841141000,"results":"35","hashOfConfig":"23"},{"size":4289,"mtime":1695841141000,"results":"36","hashOfConfig":"23"},{"size":410,"mtime":1695841141000,"results":"37","hashOfConfig":"23"},{"size":4165,"mtime":1728049364988,"results":"38","hashOfConfig":"23"},{"size":703,"mtime":1695841141000,"results":"39","hashOfConfig":"23"},{"size":2055,"mtime":1695841141000,"results":"40","hashOfConfig":"23"},{"size":1082,"mtime":1695841141000,"results":"41","hashOfConfig":"23"},{"size":1472,"mtime":1695841141000,"results":"42","hashOfConfig":"23"},{"size":1678,"mtime":1695841141000,"results":"43","hashOfConfig":"23"},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1wtpoy4",{"filePath":"47","messages":"48","suppressedMessages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"59","messages":"60","suppressedMessages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"62","messages":"63","suppressedMessages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"65","messages":"66","suppressedMessages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","suppressedMessages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"71","messages":"72","suppressedMessages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","suppressedMessages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","suppressedMessages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","suppressedMessages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","suppressedMessages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","suppressedMessages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","suppressedMessages":"91","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92"},{"filePath":"93","messages":"94","suppressedMessages":"95","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","suppressedMessages":"98","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"99","messages":"100","suppressedMessages":"101","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"102","messages":"103","suppressedMessages":"104","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"105","messages":"106","suppressedMessages":"107","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/index.js",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/reportWebVitals.js",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/App.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/utils/constants.js",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/lib/customHooks.js",["108","109"],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/AddBook/AddBook.jsx",["110"],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/Book/Book.jsx",["111"],["112"],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/Home/Home.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/updateBook/UpdateBook.jsx",["113","114"],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/pages/SignIn/SignIn.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Footer/Footer.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/ScrollToTop/ScrollToTop.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Header/Header.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/lib/common.js",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/BackArrow/BackArrow.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BookForm/BookForm.jsx",["115","116"],[],"/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as PropTypes from 'prop-types';\nimport { useNavigate } from 'react-router-dom';\nimport { generateStarsInputs } from '../../../lib/functions';\nimport { useFilePreview } from '../../../lib/customHooks';\nimport addFileIMG from '../../../images/add_file.png';\nimport styles from './BookForm.module.css';\nimport { updateBook, addBook } from '../../../lib/common';\n\nfunction BookForm({ book, validate }) {\n  const userRating = book ? book.ratings.find((elt) => elt.userId === localStorage.getItem('userId'))?.grade : 0;\n\n  const [rating, setRating] = useState(0);\n\n  const navigate = useNavigate();\n  const {\n    register, watch, formState, handleSubmit, reset,\n  } = useForm({\n    defaultValues: useMemo(() => ({\n      title: book?.title,\n      author: book?.author,\n      year: book?.year,\n      genre: book?.genre,\n    }), [book]),\n  });\n  useEffect(() => {\n    reset(book);\n  }, [book]);\n  const file = watch(['file']);\n  const [filePreview] = useFilePreview(file);\n\n  useEffect(() => {\n    setRating(userRating);\n  }, [userRating]);\n\n  useEffect(() => {\n    if (!book && formState.dirtyFields.rating) {\n      const rate = document.querySelector('input[name=\"rating\"]:checked').value;\n      setRating(parseInt(rate, 10));\n      formState.dirtyFields.rating = false;\n    }\n  }, [formState]);\n\n  const onSubmit = async (data) => {\n    // When we create a new book\n    if (!book) {\n      if (!data.file[0]) {\n        alert('Vous devez ajouter une image');\n      }\n      if (!data.rating) {\n        /* eslint-disable no-param-reassign */\n        data.rating = 0;\n        /* eslint-enable no-param-reassign */\n      }\n      const newBook = await addBook(data);\n      if (!newBook.error) {\n        validate(true);\n      } else {\n        alert(newBook.message);\n      }\n    } else {\n      const updatedBook = await updateBook(data, data.id);\n      if (!updatedBook.error) {\n        navigate('/');\n      } else {\n        alert(updatedBook.message);\n      }\n    }\n  };\n\n  const readOnlyStars = !!book;\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className={styles.Form}>\n      <input type=\"hidden\" id=\"id\" {...register('id')} />\n      <label htmlFor=\"title\">\n        <p>Titre du livre</p>\n        <input type=\"text\" id=\"title\" {...register('title')} />\n      </label>\n      <label htmlFor=\"author\">\n        <p>Auteur</p>\n        <input type=\"text\" id=\"author\" {...register('author')} />\n      </label>\n      <label htmlFor=\"year\">\n        <p>Année de publication</p>\n        <input type=\"text\" id=\"year\" {...register('year')} />\n      </label>\n      <label htmlFor=\"genre\">\n        <p>Genre</p>\n        <input type=\"text\" id=\"genre\" {...register('genre')} />\n      </label>\n      <label htmlFor=\"rate\">\n        <p>Note</p>\n        <div className={styles.Stars}>\n          {generateStarsInputs(rating, register, readOnlyStars)}\n        </div>\n      </label>\n      <label htmlFor=\"file\">\n        <p>Visuel</p>\n        <div className={styles.AddImage}>\n          {filePreview || book?.imageUrl ? (\n            <>\n              <img src={filePreview ?? book?.imageUrl} alt=\"preview\" />\n              <p>Modifier</p>\n            </>\n          ) : (\n            <>\n              <img src={addFileIMG} alt=\"Add file\" />\n              <p>Ajouter une image</p>\n            </>\n          )}\n\n        </div>\n        <input {...register('file')} type=\"file\" id=\"file\" />\n      </label>\n      <button type=\"submit\">Publier</button>\n    </form>\n  );\n}\n\nBookForm.propTypes = {\n  book: PropTypes.shape({\n    id: PropTypes.string,\n    _id: PropTypes.string,\n    userId: PropTypes.string,\n    title: PropTypes.string,\n    author: PropTypes.string,\n    year: PropTypes.number,\n    imageUrl: PropTypes.string,\n    genre: PropTypes.string,\n    ratings: PropTypes.arrayOf(PropTypes.shape({\n      userId: PropTypes.string,\n      grade: PropTypes.number,\n    })),\n    averageRating: PropTypes.number,\n  }),\n  validate: PropTypes.func,\n};\n\nBookForm.defaultProps = {\n  book: null,\n  validate: null,\n};\nexport default BookForm;\n","/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BestRatedBooks/BestRatedBooks.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BookRatingForm/BookRatingForm.jsx",["117"],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BookInfo/BookInfo.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/components/Books/BookItem/BookItem.jsx",[],[],"/Users/shoug/Downloads/P7-Dev-Web-livres-main new/frontend/src/lib/functions.jsx",[],[],{"ruleId":"118","severity":1,"message":"119","line":49,"column":6,"nodeType":"120","endLine":49,"endColumn":26,"suggestions":"121"},{"ruleId":"118","severity":1,"message":"122","line":49,"column":7,"nodeType":"123","endLine":49,"endColumn":25},{"ruleId":"118","severity":1,"message":"124","line":20,"column":6,"nodeType":"120","endLine":20,"endColumn":19,"suggestions":"125"},{"ruleId":"118","severity":1,"message":"126","line":48,"column":6,"nodeType":"120","endLine":48,"endColumn":25,"suggestions":"127"},{"ruleId":"128","severity":2,"message":"129","line":55,"column":19,"nodeType":"130","messageId":"131","endLine":55,"endColumn":26,"suppressions":"132"},{"ruleId":"118","severity":1,"message":"124","line":23,"column":6,"nodeType":"120","endLine":23,"endColumn":19,"suggestions":"133"},{"ruleId":"118","severity":1,"message":"134","line":32,"column":6,"nodeType":"120","endLine":32,"endColumn":8,"suggestions":"135"},{"ruleId":"118","severity":1,"message":"136","line":30,"column":6,"nodeType":"120","endLine":30,"endColumn":12,"suggestions":"137"},{"ruleId":"118","severity":1,"message":"138","line":44,"column":6,"nodeType":"120","endLine":44,"endColumn":17,"suggestions":"139"},{"ruleId":"118","severity":1,"message":"140","line":28,"column":6,"nodeType":"120","endLine":28,"endColumn":17,"suggestions":"141"},"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'file' and 'imgSrc'. Either include them or remove the dependency array.","ArrayExpression",["142"],"React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","ChainExpression","React Hook useEffect has missing dependencies: 'auth', 'connectedUser', and 'navigate'. Either include them or remove the dependency array.",["143"],"React Hook useEffect has a missing dependency: 'connectedUser'. Either include it or remove the dependency array.",["144"],"no-restricted-globals","Unexpected use of 'confirm'.","Identifier","defaultMessage",["145"],["146"],"React Hook useEffect has a missing dependency: 'params.id'. Either include it or remove the dependency array.",["147"],"React Hook useEffect has a missing dependency: 'reset'. Either include it or remove the dependency array.",["148"],"React Hook useEffect has a missing dependency: 'book'. Either include it or remove the dependency array.",["149"],"React Hook useEffect has a missing dependency: 'setRating'. Either include it or remove the dependency array. If 'setRating' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["150"],{"desc":"151","fix":"152"},{"desc":"153","fix":"154"},{"desc":"155","fix":"156"},{"kind":"157","justification":"158"},{"desc":"153","fix":"159"},{"desc":"160","fix":"161"},{"desc":"162","fix":"163"},{"desc":"164","fix":"165"},{"desc":"166","fix":"167"},"Update the dependencies array to be: [file, imgSrc]",{"range":"168","text":"169"},"Update the dependencies array to be: [auth, connectedUser, navigate, userLoading]",{"range":"170","text":"171"},"Update the dependencies array to be: [book, connectedUser, userLoading]",{"range":"172","text":"173"},"directive","",{"range":"174","text":"171"},"Update the dependencies array to be: [params.id]",{"range":"175","text":"176"},"Update the dependencies array to be: [book, reset]",{"range":"177","text":"178"},"Update the dependencies array to be: [book, formState]",{"range":"179","text":"180"},"Update the dependencies array to be: [formState, setRating]",{"range":"181","text":"182"},[1280,1300],"[file, imgSrc]",[727,740],"[auth, connectedUser, navigate, userLoading]",[1600,1619],"[book, connectedUser, userLoading]",[860,873],[1047,1049],"[params.id]",[1040,1046],"[book, reset]",[1438,1449],"[book, formState]",[983,994],"[formState, setRating]"]